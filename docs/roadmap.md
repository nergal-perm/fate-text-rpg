# Roadmap - план разработки

## Движок игры

Предполагается, что вся функциональность игры будет описываться в конкретных плагинах. Сам движок отвечает лишь за корректное подключение плагинов и их вызов в установленном механикой порядке. Соответственно, для реализации движка нужно понять, каким образом подключать и вызывать плагины.

### Доступные типы плагинов

Каждый элемент механики должен быть описан в виде плагина, при этом есть некоторые _ограничения_ или _особенности_ движка, например, тот факт, что у любой сущности в игре может существовать один или несколько __[Аспектов](aspects.md)__.

* `Scenario` - плагин для работы с сюжетной линией игры в целом. Отвечает за загрузку данных по [Сценарию](scenario.md) из ресурсных файлов, определяет механику продвижения по отдельным Сценам и требования, которые необходимо удовлетворить для перемещения к следующей Сцене. 
* `Location` - плагин для работы с __[Локациями](locations.md)__. Отвечает за загрузку данных по Локациям из ресурсных файлов, определяет возможность перехода между Локациями, обрабатывает смену Локаций в игре.
* `Action` - плагин, отвечающий за работу с любыми __[Действиями](actions.md)__ игроков или NPC.


### Общий ход работы движка

1. Подготовка сценария, загрузка плагинов для генерации / хранения Локаций
1. Создание персонажа. Загрузка плагинов с Аспектами, сохранение персонажа
1. Главный игровой цикл. 
    * обновление Локации + определение доступных вариантов выбора - `plugin.update()`
    * обработка пользовательского ввода (выполнение действий, броски кубика, определение описания результата) - `plugin.action()`
    * если необходимо, то мини-циклы для Состязаний, Испытаний и Конфликтов (механика должна описываться в соответствующих плагинах)
